<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Olympics Quiz ‚Äî Test Your Knowledge</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-1: #031026;
      --bg-2: #06283a;
      --glass: rgba(255,255,255,0.04);
      --muted: rgba(255,255,255,0.78);
      --gold: #ffd700;
      --accent-blue: #0085c7;
      --accent-black: #000000;
      --accent-red: #df0024;
      --accent-yellow: #f4c300;
      --accent-green: #009f3d;
      --radius: 14px;
      --card-shadow: 0 18px 50px rgba(2,8,23,0.6);
      --max-width: 980px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background:
        radial-gradient(800px 420px at 10% 12%, rgba(255,215,0,0.03), transparent 8%),
        radial-gradient(700px 360px at 92% 88%, rgba(0,212,180,0.02), transparent 6%),
        linear-gradient(160deg,var(--bg-1),var(--bg-2));
      color: #eaf6f6;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .frame{
      width:100%;
      max-width:var(--max-width);
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:28px;
      align-items:start;
    }

    /* Left showcase */
    .showcase{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: var(--radius);
      padding:28px;
      box-shadow: var(--card-shadow);
      border:1px solid var(--glass);
      position:relative;
      overflow:hidden;
      min-height:480px;
    }
    .showcase::after{
      content:"";
      position:absolute;
      right:-8%;
      top:-6%;
      width:420px;height:420px;
      background: radial-gradient(circle at 30% 30%, rgba(255,215,0,0.06), transparent 18%),
                  radial-gradient(circle at 70% 70%, rgba(0,212,180,0.03), transparent 18%);
      transform:rotate(14deg);opacity:0.85;
      pointer-events:none;
    }

    .brand {
      display:flex;gap:16px;align-items:center;margin-bottom:12px;
    }
    .logo{
      width:72px;height:72px;border-radius:14px;background:linear-gradient(180deg,#021726,#062534);
      display:grid;place-items:center;font-family:'Poppins',sans-serif;font-weight:700;color:var(--gold);
      font-size:1.55rem;box-shadow: 0 8px 28px rgba(2,8,23,0.5);border:1px solid rgba(255,255,255,0.03)
    }
    .brand h1{font-family:'Poppins',sans-serif;font-size:1.55rem;margin:0;color:#fff;letter-spacing:0.2px}
    .brand p{margin:2px 0 0 0;color:var(--muted);font-size:0.95rem}

    .motto{
      display:inline-flex;gap:8px;padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,rgba(255,215,0,0.08),rgba(255,122,24,0.03));
      color:#fff;font-weight:700;margin-top:12px;border:1px solid rgba(255,215,0,0.05);
    }

    /* Rings decorative */
    .rings{margin-top:20px}
    .rings svg{width:100%;max-width:560px;height:auto;display:block}

    /* Quiz card inside showcase */
    .quiz-card{
      margin-top:18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      border-radius:12px;padding:14px;border:1px solid rgba(255,255,255,0.02);
      display:grid;gap:12px;
    }
    .progress{
      height:10px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden;
    }
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--gold),var(--accent-blue));width:0%;transition:width .6s cubic-bezier(.2,.9,.2,1)}

    .hint{color:var(--muted);font-size:0.92rem}

    /* Right column: login / quiz controls */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:18px;padding:22px;border:1px solid var(--glass);
      box-shadow: var(--card-shadow);backdrop-filter: blur(6px);
      display:flex;flex-direction:column;gap:12px;min-height:420px;
    }
    .card header{display:flex;flex-direction:column;gap:6px}
    .card header h2{margin:0;font-family:'Poppins',sans-serif;font-size:1.25rem;color:#fff}
    .card header p{margin:0;color:var(--muted);font-size:0.92rem}

    form{display:flex;flex-direction:column;gap:12px;margin-top:6px}
    label{font-size:0.86rem;color:var(--muted);font-weight:600}
    input[type="email"],input[type="password"]{
      width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);
      background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      color:#eaf6f6;font-size:0.95rem;outline:none;box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
    }
    input:focus{ box-shadow: 0 12px 30px rgba(2,8,23,0.45); transform:translateY(-2px); border-color: rgba(255,215,0,0.16) }

    .row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .remember{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:0.92rem}
    .remember input{width:auto}

    .actions{display:flex;gap:12px;align-items:center}
    .btn{
      flex:1;padding:12px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:800;
      color:#041822;background:linear-gradient(90deg,var(--gold),#ff8a1a);box-shadow:0 12px 36px rgba(1,30,20,0.16);
      transition:transform .14s ease, box-shadow .14s ease;
    }
    .btn:hover{ transform:translateY(-4px); box-shadow:0 30px 60px rgba(1,30,20,0.22) }

    .btn.secondary{
      background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:700;
    }

    .small{font-size:0.85rem;color:var(--muted)}
    .footer{margin-top:auto;font-size:0.82rem;color:var(--muted);text-align:center}

    /* Questions list */
    .question{
      padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);
      border:1px solid rgba(255,255,255,0.02);
    }
    .question p{margin:0 0 8px 0;font-weight:700}
    .options label{display:block;margin-bottom:8px;cursor:pointer;padding:8px;border-radius:8px}
    .options input{margin-right:10px}
    .options label:hover{background:rgba(255,255,255,0.02)}

    /* Result modal */
    .result{
      display:none;align-items:center;justify-content:center;flex-direction:column;gap:12px;padding:18px;border-radius:12px;background:linear-gradient(90deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02));color:#fff;
    }
    .result.show{display:flex}
    .score{
      font-size:2.6rem;font-weight:800;color:var(--gold);
    }
    .medal{
      font-size:1.6rem;font-weight:800;
    }

    /* responsive */
    @media (max-width:980px){
      .frame{grid-template-columns:1fr;gap:18px}
      .showcase{order:2}
      .card{order:1}
    }
  </style>
</head>
<body>
  <main class="frame" role="main" aria-labelledby="quiz-title">
    <!-- Showcase with rings & brief quiz summary -->
    <section class="showcase" aria-hidden="false">
      <div class="brand" role="img" aria-label="Olympic Quiz">
        <div class="logo">üèÖ</div>
        <div>
          <h1 id="quiz-title">Olympics Quiz</h1>
          <p>Test your knowledge about the Games ‚Äî history, records and legends. 10 questions per quiz.</p>
        </div>
      </div>

      <div class="motto" aria-hidden="true">Citius ‚Ä¢ Altius ‚Ä¢ Fortius</div>

      <div class="rings" aria-hidden="true">
        <!-- Crisp decorative Olympic rings SVG -->
        <svg viewBox="0 0 560 200" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Olympic rings decorative">
          <defs>
            <filter id="f" x="-50%" y="-50%" width="200%" height="200%">
              <feDropShadow dx="0" dy="8" stdDeviation="10" flood-color="#000" flood-opacity="0.35"/>
            </filter>
            <style>.r{fill:none;stroke-linecap:round;stroke-width:16;filter:url(#f)}</style>
          </defs>

          <circle class="r" cx="90" cy="80" r="44" stroke="#0085c7"/>
          <circle class="r" cx="210" cy="80" r="44" stroke="#000000"/>
          <circle class="r" cx="330" cy="80" r="44" stroke="#df0024"/>
          <circle class="r" cx="150" cy="120" r="44" stroke="#f4c300"/>
          <circle class="r" cx="270" cy="120" r="44" stroke="#009f3d"/>
        </svg>
      </div>

      <div class="quiz-card" aria-hidden="true">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:800;font-size:1.05rem">Olympics Facts</div>
            <div class="hint">Quick round ‚Äî sharpen your Olympic trivia</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:800;color:var(--gold);font-size:1.15rem" id="best-score">Best: ‚Äî</div>
            <div style="font-size:0.85rem;color:var(--muted)">Keep improving</div>
          </div>
        </div>

        <div class="progress" aria-hidden="true" title="Progress">
          <i id="progressBar" style="width:0%"></i>
        </div>

        <div style="display:flex;gap:10px;justify-content:flex-end">
          <button class="btn secondary" id="restartBtn" type="button">Shuffle Questions</button>
          <button class="btn" id="startBtn" type="button">Start Quiz</button>
        </div>
      </div>
    </section>

    <!-- Right: Quiz content & login -->
    <aside class="card" aria-label="Quiz and sign-in">
      <header>
        <h2>Sign in & Play</h2>
        <p class="small">Please sign in to record your score (demo: login optional).</p>
      </header>

      <form id="loginForm" autocomplete="on" novalidate>
        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@country.org" autocomplete="username" />
        </div>

        <div>
          <label for="password">Password</label>
          <input id="password" name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
        </div>

        <div class="row">
          <label class="remember"><input type="checkbox" id="remember" name="remember" /> Remember me</label>
          <button type="button" class="small" id="guestBtn" style="background:transparent;border:none;color:var(--muted);cursor:pointer">Play as guest</button>
        </div>

        <div class="actions">
          <button type="button" class="btn" id="loginBtn">Sign in & Play</button>
           <button class="btn secondary" id="homeBtn" type="button">Return Home</button>
        </div>
      </form>

      <div id="quizArea" style="display:none;margin-top:6px;flex-direction:column;gap:12px">
        <div id="questionsContainer"></div>

        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn secondary" id="prevBtn" type="button" disabled>Previous</button>
          <button class="btn secondary" id="nextBtn" type="button">Next</button>
          <button class="btn" id="submitBtn" type="button">Submit Answers</button>
        </div>
      </div>

      <div class="result" id="resultBox" role="status" aria-live="polite">
        <div class="medal" id="resultMessage">Well done!</div>
        <div class="score" id="scoreValue">0 / 10</div>
        <div id="feedback" style="color:var(--muted);text-align:center">You can replay to improve your score.</div>
        <div style="display:flex;gap:10px;margin-top:6px">
          <button class="btn secondary" id="playAgainBtn" type="button">Play Again</button>
          <button class="btn" id="shareBtn" type="button">Share Score</button>
        </div>
        <div style="display:flex;gap:10px;margin-top:6px">
  <button class="btn secondary" id="playAgainBtn" type="button">Play Again</button>
  <button class="btn" id="shareBtn" type="button">Share Score</button>
 
</div>
      </div>

      <div class="footer" style="margin-top:12px">
        <small>Powered by Olympic Portal ‚Ä¢ Citius ¬∑ Altius ¬∑ Fortius</small>
      </div>
    </aside>
  </main>

  <script>
    // --- Data: create or replace questions (here we create 100 and pick 10) ---
    const questionsPool = [];
    for (let i = 1; i <= 100; i++) {
      // Example items ‚Äî replace with real olympic questions
      questionsPool.push({
        id: i,
        question: `Question ${i}: Which year corresponds to Olympic edition #${i}?`,
        options: ["1900", "1950", "2000", "2020"],
        answer: "2020"
      });
    }

    // Utility
    function shuffle(arr){ return arr.slice().sort(()=>0.5 - Math.random()) }
    function pickRandomQuestions(n=10){
      return shuffle(questionsPool).slice(0,n).map(q => ({...q}));
    }

    // State
    let selectedQuestions = pickRandomQuestions(10);
    let currentIndex = 0;
    let answers = {}; // { qIndex: selectedOption }
    let started = false;

    // Elements
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const loginBtn = document.getElementById('loginBtn');
    const guestBtn = document.getElementById('guestBtn');
    const quizArea = document.getElementById('quizArea');
    const questionsContainer = document.getElementById('questionsContainer');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const progressBar = document.getElementById('progressBar');
    const resultBox = document.getElementById('resultBox');
    const scoreValue = document.getElementById('scoreValue');
    const resultMessage = document.getElementById('resultMessage');
    const bestScoreEl = document.getElementById('best-score');
    const playAgainBtn = document.getElementById('playAgainBtn');
    const shareBtn = document.getElementById('shareBtn');

    // Prefill best from localStorage
    const BEST_KEY = 'olympic_quiz_best';
    function getBest(){ return parseInt(localStorage.getItem(BEST_KEY)) || 0 }
    function setBest(val){ localStorage.setItem(BEST_KEY, String(val)); bestScoreEl.textContent = 'Best: ' + val }

    setBest(getBest());

    // Render single question
    function renderQuestion(index){
      const q = selectedQuestions[index];
      questionsContainer.innerHTML = `
        <div class="question" aria-live="polite">
          <p>${index + 1}. ${escapeHtml(q.question)}</p>
          <div class="options">
            ${q.options.map(opt => `
              <label>
                <input type="radio" name="q${index}" value="${escapeHtml(opt)}" ${answers[index] === opt ? 'checked' : ''}>
                ${escapeHtml(opt)}
              </label>
            `).join('')}
          </div>
        </div>
      `;
      // update progress
      const pct = Math.round(((index) / (selectedQuestions.length)) * 100);
      progressBar.style.width = pct + '%';

      prevBtn.disabled = (index === 0);
      nextBtn.disabled = (index === selectedQuestions.length - 1);
    }

    // Escape to avoid injection
    function escapeHtml(s){
      if (s === null || s === undefined) return '';
      return String(s).replace(/[&<>"'`=\/]/g, function(c){
        return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'}[c];
      });
    }

    // Start quiz (requires sign-in or guest)
    function beginQuiz(){
      started = true;
      document.getElementById('loginForm').style.display = 'none';
      quizArea.style.display = 'flex';
      currentIndex = 0;
      answers = {};
      resultBox.classList.remove('show');
      renderQuestion(currentIndex);
    }

    // Event bindings
    startBtn.addEventListener('click', () => {
      beginQuiz();
    });

    restartBtn.addEventListener('click', () => {
      selectedQuestions = pickRandomQuestions(10);
      currentIndex = 0;
      answers = {};
      if (started) renderQuestion(currentIndex);
    });

    loginBtn.addEventListener('click', () => {
      // Demo: accept any inputs as "login" and start
      beginQuiz();
    });

    guestBtn.addEventListener('click', () => {
      beginQuiz();
    });

    nextBtn.addEventListener('click', () => {
      // save current selection
      const sel = document.querySelector(`input[name="q${currentIndex}"]:checked`);
      if (sel) answers[currentIndex] = sel.value;
      if (currentIndex < selectedQuestions.length - 1) currentIndex++;
      renderQuestion(currentIndex);
    });

    prevBtn.addEventListener('click', () => {
      const sel = document.querySelector(`input[name="q${currentIndex}"]:checked`);
      if (sel) answers[currentIndex] = sel.value;
      if (currentIndex > 0) currentIndex--;
      renderQuestion(currentIndex);
    });

    // Allow clicking an option to auto-advance (optional, friendly)
    questionsContainer.addEventListener('change', (e) => {
      const sel = e.target;
      if (sel && sel.name && sel.name.startsWith('q')) {
        const idx = Number(sel.name.replace('q',''));
        answers[idx] = sel.value;
      }
    });

    submitBtn.addEventListener('click', () => {
      // collect last selection
      const sel = document.querySelector(`input[name="q${currentIndex}"]:checked`);
      if (sel) answers[currentIndex] = sel.value;

      // Evaluate
      let score = 0;
      selectedQuestions.forEach((q, i) => {
        if (answers[i] && answers[i] === q.answer) score++;
      });

      // Show results
      scoreValue.textContent = `${score} / ${selectedQuestions.length}`;
      if (score >= Math.ceil(selectedQuestions.length * 0.8)) {
        resultMessage.textContent = "Gold performance!";
      } else if (score >= Math.ceil(selectedQuestions.length * 0.5)) {
        resultMessage.textContent = "Silver effort!";
      } else {
        resultMessage.textContent = "Keep training!";
      }

      // Save best
      if (score > getBest()) { setBest(score); }

      resultBox.classList.add('show');
      // update progress to full
      progressBar.style.width = '100%';
      // scroll into view if needed
      resultBox.scrollIntoView({behavior:'smooth', block:'center'});
    });

    playAgainBtn.addEventListener('click', () => {
      selectedQuestions = pickRandomQuestions(10);
      answers = {};
      currentIndex = 0;
      resultBox.classList.remove('show');
      renderQuestion(currentIndex);
    });

    shareBtn.addEventListener('click', () => {
      const text = `I scored ${scoreValue.textContent} on the Olympics Quiz! Can you beat me?`;
      if (navigator.share) {
        navigator.share({title: 'Olympics Quiz', text}).catch(()=>{});
      } else {
        prompt('Copy your score to share:', text);
      }
    });

    // Initialize: show first question in a preview mode (not started)
    (function init(){
      // show a preview question in the left progress and first question if user clicks start
      // preload UI state
      renderQuestion(currentIndex);
      // Visual progress start at 0
      progressBar.style.width = '0%';
    })();
    const homeBtn = document.getElementById('homeBtn');
homeBtn.addEventListener('click', () => {
  // Redirect to Flask route
  window.location.href = "/olympics/{{ username }}"; 
});

  </script>
</body>
</html>